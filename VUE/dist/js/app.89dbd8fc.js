(function(){var t={7184:function(t,e,s){"use strict";var r=s(8935),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},n=[],i=s(1001),o={},l=(0,i.Z)(o,a,n,!1,null,null,null),c=l.exports,u=s(2809),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home-container"},[r("User"),r("img",{staticClass:"home-img",attrs:{src:s(1125),alt:""}}),r("SearchInput")],1)},p=[],m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-container"},[t.isLogin?s("div",{staticClass:"logined"},[s("div",{staticClass:"userinfo",on:{click:t.goUserInfo}},[t._m(0),s("span",{staticClass:"username"},[t._v(t._s(t.loginedUsername))])]),s("a",{staticStyle:{"vertical-align":"middle"},attrs:{href:"javascript:;"},on:{click:t.logout}},[t._v("注销")])]):s("div",{staticClass:"unlogin"},[s("div",{staticClass:"login"},[s("el-button",{attrs:{type:"primary"},on:{click:t.goLogin}},[t._v("登录")])],1),s("div",{staticClass:"register"},[s("router-link",{attrs:{to:"/register"}},[t._v("注册")])],1)])])},v=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"userimg"},[r("img",{attrs:{src:s(1857),alt:""}})])}],f=s(4665),g={computed:{...(0,f.rn)(["isLogin","loginedUsername"])},methods:{goLogin(){this.$router.push("/login")},goUserInfo(){this.$router.push("/userinfo")},logout(){localStorage.removeItem("token"),this.$store.commit("LOGOUT")}},mounted(){localStorage.getItem("token")&&this.$store.dispatch("autoLogin",localStorage.getItem("token"))}},h=g,w=(0,i.Z)(h,m,v,!1,null,"0a9b88f8",null),_=w.exports,C={methods:{},mutations(){},components:{User:_}},y=C,b=(0,i.Z)(y,d,p,!1,null,"f787b762",null),x=b.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"result-container"},[s("SearchInput"),s("User"),s("div",{staticClass:"res-content"},[s("div",{staticClass:"resInfo"},[t._v("共找到 "+t._s(t.total)+" 条结果")]),t._l(t.documents,(function(e){return s("Tip",{key:e.id,attrs:{imgsrc:e.document.Url,textcontent:e.text,fvrsList:t.fvrsList,tipId:e.id}})}))],2),s("div",{staticClass:"pagination"},[s("el-pagination",{ref:"pagination",attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page},on:{"current-change":t.currentChange,"prev-click":t.prevClick,"next-click":t.nextClick}})],1)],1)},L=[],P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tip-container"},["/result"===t.$route.path?s("div",{staticClass:"star"},[s("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[s("div",{staticClass:"fvrList"},t._l(t.fvrsList,(function(e){return s("p",{key:e,staticClass:"fvrname",on:{click:function(s){return t.addToFvrs(e,t.tipId)}}},[t._v(t._s(e))])})),0),s("el-button",{ref:"starBtn",attrs:{slot:"reference"},slot:"reference"},[t._v("+")])],1)],1):t._e(),"/userinfo"===t.$route.path?s("div",{staticClass:"clearStar",on:{click:function(e){return t.clearTipStart(t.fvrName,t.tipId)}}},[s("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v("X")])],1):t._e(),s("div",{staticClass:"tip-img"},[s("img",{attrs:{src:t.imgsrc,alt:""}})]),s("div",{staticClass:"text"},[t._v(t._s(t.textcontent))])])},E=[],S=(s(1703),s(6166)),U=s.n(S),T=s(9879),$=s.n(T),I=s(7421),O=s.n(I);const R=U().create({baseURL:"http://leiyu.icu:5678/api",timeout:5e3});R.interceptors.request.use((t=>(localStorage.token&&(t.headers.Authorization=localStorage.token),$().start(),t))),R.interceptors.response.use((t=>($().done(),t.data)),(t=>Promise.reject(new Error("faile"))));const F=(t,e=1)=>{const s={query:t,page:e,limit:10,order:"desc"},r=JSON.stringify(s);return R({url:"/query",method:"post",data:r})},N=(t,e)=>{const s=O().stringify({username:t,password:e});return R({url:"/login",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:s})},Z=(t,e)=>{const s=O().stringify({username:t,password:e});return R({url:"/register",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:s})},j=t=>R({url:"/favorite/username",method:"get"}),G=t=>{const e=O().stringify({favorite_name:t});return R({url:"/favorite/add",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:e})},A=t=>{const e=O().stringify({favorite_name:t});return R({url:"/favorite/delete",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:e})},M=()=>R({url:"/favorite/get_list",method:"get"}),J=(t,e)=>{const s=O().stringify({favorite_name:t,doc_id:e});return R({url:"/favorite/add_item",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:s})},q=(t,e)=>{const s=O().stringify({favorite_name:t,doc_id:e});return R({url:"/favorite/delete_item",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:s})},z=t=>{const e=O().stringify({favorite_name:t});return R({url:"/favorite/get_items",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:e})};var B={props:["imgsrc","textcontent","fvrsList","tipId","fvrName"],data(){return{visible:!1}},methods:{async addToFvrs(t,e){const s=await J(t,e);!0===s.state&&(alert("添加成功"),this.visible=!1)},async clearTipStart(t,e){const s=await q(t,e);!0===s.state&&this.$emit("delItemSuccess")}},mounted(){},components:{}},X=B,H=(0,i.Z)(X,P,E,!1,null,"14657094",null),W=H.exports,D={data(){return{fvrsList:[]}},methods:{currentChange(){const t=this.$refs.pagination.internalCurrentPage;this.$store.dispatch("pageJump",{targetPage:t,input:this.keyword})},prevClick(){const t=this.page-1;this.$store.dispatch("pageJump",{targetPage:t,input:this.keyword})},nextClick(){const t=this.page+1;this.$store.dispatch("pageJump",{targetPage:t,input:this.keyword})},async loadFvrList(){const t=await M();console.log(1),!0===t.state&&(this.fvrsList=t.data.favorite_list)}},computed:{...(0,f.rn)(["documents","pageCount","total","page","keyword","currentPage"])},watch:{},mounted(){this.loadFvrList()},components:{Tip:W,User:_}},K=D,Q=(0,i.Z)(K,k,L,!1,null,"4fc58596",null),V=Q.exports,Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-container"},[s("div",{staticClass:"loginbox"},[s("h4",[t._v("登陆")]),s("form",{attrs:{action:"#"}},[s("div",{staticClass:"unamebox"},[s("div",{staticClass:"uname"},[t._v("用户名：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.usn,expression:"usn"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:t.usn},on:{input:function(e){e.target.composing||(t.usn=e.target.value)}}})]),s("div",{staticClass:"pswbox"},[s("div",{staticClass:"psw"},[t._v("登陆密码：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.psw,expression:"psw"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.psw},on:{input:function(e){e.target.composing||(t.psw=e.target.value)}}})]),s("button",{staticClass:"loginbtn",on:{click:function(e){return t.goLogin(t.usn,t.psw)}}},[t._v("登陆")]),s("router-link",{staticClass:"regbtn",attrs:{to:"/register"}},[t._v("注册")])],1)])])},tt=[],et={data(){return{usn:"",psw:""}},methods:{async goLogin(t,e){const s=await N(t,e);!0===s.state?(localStorage.setItem("token",s.data.token),this.$router.push("/home")):alert("登录失败！"+s.message)}}},st=et,rt=(0,i.Z)(st,Y,tt,!1,null,"cd3557c4",null),at=rt.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-container"},[s("div",{staticClass:"loginbox"},[s("h4",[t._v("注册")]),s("form",{attrs:{action:"#"}},[s("div",{staticClass:"unamebox"},[s("div",{staticClass:"uname"},[t._v("用户名：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.regUsername,expression:"regUsername"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:t.regUsername},on:{blur:function(e){return t.regExp1(t.regUsername,t.usnPtn)},input:function(e){e.target.composing||(t.regUsername=e.target.value)}}}),t.isUsnCrt?s("span",{staticClass:"crt"},[t._v(" √")]):s("span",{staticClass:"icrt"},[t._v(" X")]),s("p",{staticClass:"iptTips"},[t._v("字母开头，允许5-16字节，允许字母数字下划线")])]),s("div",{staticClass:"pswbox"},[s("div",{staticClass:"psw"},[t._v("登陆密码：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.regPassword,expression:"regPassword"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.regPassword},on:{blur:function(e){return t.regExp2(t.regPassword,t.pswPtn)},input:function(e){e.target.composing||(t.regPassword=e.target.value)}}}),t.isPswCrt?s("span",{staticClass:"crt"},[t._v(" √")]):s("span",{staticClass:"icrt"},[t._v(" X")]),s("p",{staticClass:"iptTips"},[t._v("以字母开头，长度在6~18之间，只能包含字母、数字和下划线")])]),s("div",{staticClass:"pswbox"},[s("div",{staticClass:"psw"},[t._v("重复输入密码：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.reRegPassword,expression:"reRegPassword"}],attrs:{type:"password",placeholder:"请重复输入密码"},domProps:{value:t.reRegPassword},on:{blur:function(e){return t.regExp3(t.reRegPassword)},input:function(e){e.target.composing||(t.reRegPassword=e.target.value)}}}),t.isRpswCrt?s("span",{staticClass:"crt"},[t._v(" √")]):s("span",{staticClass:"icrt"},[t._v(" X")])]),s("button",{staticClass:"regbtn",attrs:{disabled:!t.allCrt},on:{click:function(e){return t.subReg(t.regUsername,t.regPassword)}}},[t._v("注册")])])])])},it=[],ot={data(){return{regUsername:"",regPassword:"",reRegPassword:"",usnPtn:/^[a-zA-Z][a-zA-Z0-9_]{4,15}$/,pswPtn:/^[a-zA-Z]\w{5,17}$/,isUsnCrt:!1,isPswCrt:!1,isRpswCrt:!1}},computed:{allCrt(){return this.isUsnCrt&&this.isPswCrt&&this.isRpswCrt}},methods:{regExp1(t,e){e.test(t)?this.isUsnCrt=!0:this.isUsnCrt=!1},regExp2(t,e){e.test(t)&&""===this.reRegPassword?this.isPswCrt=!0:e.test(t)&&""!==this.reRegPassword&&this.reRegPassword!==this.regPassword?this.isRpswCrt=!1:this.isPswCrt=!1},regExp3(t){t===this.regPassword?this.isRpswCrt=!0:this.isRpswCrt=!1},async subReg(t,e){const s=await Z(t,e);!0===s.state?(alert("注册成功"),this.$router.push("/home")):alert("注册失败，"+s.message)}}},lt=ot,ct=(0,i.Z)(lt,nt,it,!1,null,"68bb4f76",null),ut=ct.exports,dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"userinfo-container"},[s("el-form",{ref:"addFvrs",staticClass:"demo-dynamic",attrs:{model:t.addFvr}},[s("el-form-item",{attrs:{label:"新建收藏夹:"}},[s("el-input",{model:{value:t.addFvr.favorite_name,callback:function(e){t.$set(t.addFvr,"favorite_name",e)},expression:"addFvr.favorite_name"}}),s("el-button",{attrs:{type:"primary"},on:{click:t.addFvrSubmit}},[t._v("新建")])],1)],1),s("div",{staticClass:"fvrList"},[s("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.fvrsList,(function(e,r){return s("el-collapse-item",{key:e,staticClass:"fvrTip",attrs:{name:r},on:{mouseenter:t.showDel}},[s("template",{slot:"title"},[t._v(" "+t._s(e)+" "),s("a",{ref:"delBtn",refInFor:!0,staticClass:"delBtn",attrs:{href:"javascript:;"},on:{click:function(s){return t.delFvrList(e)}}},[t._v("删除")])]),t._l(t.fvrsListItems[r],(function(r){return s("Tip",{key:r.id,attrs:{imgsrc:r.document.Url,textcontent:r.text,tipId:r.id,fvrName:e},on:{delItemSuccess:t.reloadList}})}))],2)})),1)],1)],1)},pt=[],mt={data(){return{addFvr:{favorite_name:""},fvrsList:[],fvrsListItems:[],activeNames:["1"],visible:!1}},methods:{showDel(){console.log(1),this.$refs.delBtn.style.display="inline-block"},reloadList(){this.fvrsListItems=[],this.loadFvrList()},async addFvrSubmit(){const t=await G(this.addFvr.favorite_name);console.log(t),!0===t.state&&this.loadFvrList()},async loadFvrList(){const t=await M();if(!0===t.state){this.fvrsList=t.data.favorite_list;for(let t=0;t<this.fvrsList.length;t++){const e=await z(this.fvrsList[t]);this.fvrsListItems.push(e.data)}}},async delFvrList(t){const e=await A(t);!0===e.state&&this.loadFvrList()}},mounted(){this.loadFvrList()},components:{Tip:W}},vt=mt,ft=(0,i.Z)(vt,dt,pt,!1,null,"21dd0a7a",null),gt=ft.exports;r["default"].use(u.Z);const ht=[{path:"/",redirect:"/home"},{path:"/home",component:x,meta:{title:"零度搜索"}},{path:"/result",component:V,meta:{title:"零度搜索"}},{path:"/login",component:at,meta:{title:"登录"}},{path:"/register",component:ut,meta:{title:"注册"}},{path:"/userinfo",component:gt,meta:{title:"我的空间"}}],wt=new u.Z({routes:ht});wt.beforeEach(((t,e,s)=>{"/userinfo"===t.path?""!==localStorage.token?s():s("/login"):s()})),wt.beforeEach(((t,e,s)=>{t.meta.title&&(document.title=t.meta.title),s()}));var _t=wt;r["default"].use(f.ZP);var Ct=new f.ZP.Store({state:{keyword:"",documents:[],limit:0,page:0,total:0,pageCount:0,time:0,isLogin:!1,loginedUsername:""},getters:{},mutations:{SETINPUT(t,e){t.keyword=e},GETRESULT(t,e){t.documents=e.documents,t.limit=e.limit,t.page=e.page,t.total=e.total,t.pageCount=e.pageCount,t.time=e.time},AUTOLOGIN(t,e){t.loginedUsername=e},SHOWUSERELEMENT(t,e){t.isLogin=e},LOGOUT(t,e){t.isLogin=!1,t.loginedUsername=""}},actions:{async getResult(t,e){const s=await F(e);(s.state="true")&&t.commit("GETRESULT",s.data)},async pageJump(t,e){const s=await F(e.input,e.targetPage);(s.state="true")&&t.commit("GETRESULT",s.data)},async autoLogin(t,e){const s=await j(e);!0===s.state?(t.commit("AUTOLOGIN",s.data.username),t.commit("SHOWUSERELEMENT",!0)):t.commit("SHOWUSERELEMENT",!1)}},modules:{}}),yt=s(4549),bt=s.n(yt),xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"searchInput-container",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goSearch(t.input)}}},[s("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.goSearch(t.input)}}},[t._v("搜索")])],1)},kt=[],Lt={data(){return{input:""}},methods:{goSearch(t){this.$store.commit("SETINPUT",t),this.$store.dispatch("getResult",t),this.$route.path,this.$router.push({path:"result",query:{input:this.keyword}})}},computed:{...(0,f.rn)({keyword:t=>t.keyword})},mounted(){this.input=this.keyword}},Pt=Lt,Et=(0,i.Z)(Pt,xt,kt,!1,null,"04bfaa60",null),St=Et.exports;r["default"].config.productionTip=!1,r["default"].use(bt()),r["default"].component("SearchInput",St),r["default"].component("User",_),new r["default"]({router:_t,store:Ct,render:t=>t(c)}).$mount("#app")},1125:function(t,e,s){"use strict";t.exports=s.p+"img/leiyu.5f127551.png"},1857:function(t,e,s){"use strict";t.exports=s.p+"img/useriomg.a9e71540.png"},4654:function(){}},e={};function s(r){var a=e[r];if(void 0!==a)return a.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,r,a,n){if(!r){var i=1/0;for(u=0;u<t.length;u++){r=t[u][0],a=t[u][1],n=t[u][2];for(var o=!0,l=0;l<r.length;l++)(!1&n||i>=n)&&Object.keys(s.O).every((function(t){return s.O[t](r[l])}))?r.splice(l--,1):(o=!1,n<i&&(i=n));if(o){t.splice(u--,1);var c=a();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[r,a,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,r){var a,n,i=r[0],o=r[1],l=r[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(l)var u=l(s)}for(e&&e(r);c<i.length;c++)n=i[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(u)},r=self["webpackChunkleiyu"]=self["webpackChunkleiyu"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(7184)}));r=s.O(r)})();
//# sourceMappingURL=app.89dbd8fc.js.map