(function(){var t={67184:function(t,e,n){"use strict";n(66992),n(88674),n(19601),n(17727);var r=n(28935),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],i=n(1001),o={},c=(0,i.Z)(o,s,a,!1,null,null,null),u=c.exports,l=n(12809),p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home-container"},[r("User"),r("img",{staticClass:"home-img",attrs:{src:n(71125),alt:""}}),r("SearchInput")],1)},d=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-container"},[t.isLogin?n("div",{staticClass:"logined"},[n("div",{staticClass:"userinfo",on:{click:t.goUserInfo}},[t._m(0),n("span",{staticClass:"username"},[t._v(t._s(t.loginedUsername))])]),n("a",{staticStyle:{"vertical-align":"middle"},attrs:{href:"javascript:;"},on:{click:t.logout}},[t._v("注销")])]):n("div",{staticClass:"unlogin"},[n("div",{staticClass:"login"},[n("el-button",{attrs:{type:"primary"},on:{click:t.goLogin}},[t._v("登录")])],1),n("div",{staticClass:"register"},[n("router-link",{attrs:{to:"/register"}},[t._v("注册")])],1)])])},v=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"userimg"},[r("img",{attrs:{src:n(1857),alt:""}})])}],m=n(93019),g=n(34665),h={computed:(0,m.Z)({},(0,g.rn)(["isLogin","loginedUsername"])),methods:{goLogin:function(){this.$router.push("/login")},goUserInfo:function(){this.$router.push("/userinfo")},logout:function(){localStorage.removeItem("token"),this.$store.commit("LOGOUT")}},mounted:function(){localStorage.getItem("token")&&this.$store.dispatch("autoLogin",localStorage.getItem("token"))}},w=h,_=(0,i.Z)(w,f,v,!1,null,"0a9b88f8",null),x=_.exports,C={methods:{},mutations:function(){},components:{User:x}},k=C,y=(0,i.Z)(k,p,d,!1,null,"f787b762",null),b=y.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"result-container"},[n("SearchInput"),n("User"),n("div",{staticClass:"res-content"},[n("div",{staticClass:"resInfo"},[t._v("共找到 "+t._s(t.total)+" 条结果")]),t._l(t.documents,(function(e){return n("Tip",{key:e.id,attrs:{imgsrc:e.document.Url,textcontent:e.text,fvrsList:t.fvrsList,tipId:e.id}})}))],2),n("div",{staticClass:"pagination"},[n("el-pagination",{ref:"pagination",attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page},on:{"current-change":t.currentChange,"prev-click":t.prevClick,"next-click":t.nextClick}})],1)],1)},L=[],P=n(67906),E=n(16198),S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tip-container"},["/result"===t.$route.path?n("div",{staticClass:"star"},[n("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("div",{staticClass:"fvrList"},t._l(t.fvrsList,(function(e){return n("p",{key:e,staticClass:"fvrname",on:{click:function(n){return t.addToFvrs(e,t.tipId)}}},[t._v(t._s(e))])})),0),n("el-button",{ref:"starBtn",attrs:{slot:"reference"},slot:"reference"},[t._v("+")])],1)],1):t._e(),"/userinfo"===t.$route.path?n("div",{staticClass:"clearStar",on:{click:function(e){return t.clearTipStart(t.fvrName,t.tipId)}}},[n("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v("X")])],1):t._e(),n("div",{staticClass:"tip-img"},[n("img",{attrs:{src:t.imgsrc,alt:""}})]),n("div",{staticClass:"text"},[t._v(t._s(t.textcontent))])])},U=[],T=(n(41539),n(21703),n(38862),n(26166)),$=n.n(T),I=n(39879),O=n.n(I),R=n(57421),F=n.n(R),N=$().create({baseURL:"http://leiyu.icu:5678/api",timeout:5e3});N.interceptors.request.use((function(t){return localStorage.token&&(t.headers.Authorization=localStorage.token),O().start(),t})),N.interceptors.response.use((function(t){return O().done(),t.data}),(function(t){return Promise.reject(new Error("faile"))}));var j=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={query:t,page:e,limit:10,order:"desc"},r=JSON.stringify(n);return N({url:"/query",method:"post",data:r})},G=function(t,e){var n=F().stringify({username:t,password:e});return N({url:"/login",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:n})},A=function(t,e){var n=F().stringify({username:t,password:e});return N({url:"/register",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:n})},M=function(t){return N({url:"/favorite/username",method:"get"})},J=function(t){var e=F().stringify({favorite_name:t});return N({url:"/favorite/add",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:e})},q=function(t){var e=F().stringify({favorite_name:t});return N({url:"/favorite/delete",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:e})},z=function(){return N({url:"/favorite/get_list",method:"get"})},B=function(t,e){var n=F().stringify({favorite_name:t,doc_id:e});return N({url:"/favorite/add_item",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:n})},X=function(t,e){var n=F().stringify({favorite_name:t,doc_id:e});return N({url:"/favorite/delete_item",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:n})},H=function(t){var e=F().stringify({favorite_name:t});return N({url:"/favorite/get_items",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:e})},W={props:["imgsrc","textcontent","fvrsList","tipId","fvrName"],data:function(){return{visible:!1}},methods:{addToFvrs:function(t,e){var n=this;return(0,E.Z)((0,P.Z)().mark((function r(){var s;return(0,P.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,B(t,e);case 2:s=r.sent,!0===s.state&&(alert("添加成功"),n.visible=!1);case 4:case"end":return r.stop()}}),r)})))()},clearTipStart:function(t,e){var n=this;return(0,E.Z)((0,P.Z)().mark((function r(){var s;return(0,P.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,X(t,e);case 2:s=r.sent,!0===s.state&&n.$emit("delItemSuccess");case 4:case"end":return r.stop()}}),r)})))()}},mounted:function(){},components:{}},D=W,K=(0,i.Z)(D,S,U,!1,null,"14657094",null),Q=K.exports,V={data:function(){return{fvrsList:[]}},methods:{currentChange:function(){var t=this.$refs.pagination.internalCurrentPage;this.$store.dispatch("pageJump",{targetPage:t,input:this.keyword})},prevClick:function(){var t=this.page-1;this.$store.dispatch("pageJump",{targetPage:t,input:this.keyword})},nextClick:function(){var t=this.page+1;this.$store.dispatch("pageJump",{targetPage:t,input:this.keyword})},loadFvrList:function(){var t=this;return(0,E.Z)((0,P.Z)().mark((function e(){var n;return(0,P.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:n=e.sent,console.log(1),!0===n.state&&(t.fvrsList=n.data.favorite_list);case 5:case"end":return e.stop()}}),e)})))()}},computed:(0,m.Z)({},(0,g.rn)(["documents","pageCount","total","page","keyword","currentPage"])),watch:{},mounted:function(){this.loadFvrList()},components:{Tip:Q,User:x}},Y=V,tt=(0,i.Z)(Y,Z,L,!1,null,"4fc58596",null),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-container"},[n("div",{staticClass:"loginbox"},[n("h4",[t._v("登陆")]),n("form",{attrs:{action:"#"}},[n("div",{staticClass:"unamebox"},[n("div",{staticClass:"uname"},[t._v("用户名：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.usn,expression:"usn"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:t.usn},on:{input:function(e){e.target.composing||(t.usn=e.target.value)}}})]),n("div",{staticClass:"pswbox"},[n("div",{staticClass:"psw"},[t._v("登陆密码：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.psw,expression:"psw"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.psw},on:{input:function(e){e.target.composing||(t.psw=e.target.value)}}})]),n("button",{staticClass:"loginbtn",on:{click:function(e){return t.goLogin(t.usn,t.psw)}}},[t._v("登陆")]),n("router-link",{staticClass:"regbtn",attrs:{to:"/register"}},[t._v("注册")])],1)])])},rt=[],st={data:function(){return{usn:"",psw:""}},methods:{goLogin:function(t,e){var n=this;return(0,E.Z)((0,P.Z)().mark((function r(){var s;return(0,P.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,G(t,e);case 2:s=r.sent,!0===s.state?(localStorage.setItem("token",s.data.token),n.$router.push("/home")):alert("登录失败！"+s.message);case 4:case"end":return r.stop()}}),r)})))()}}},at=st,it=(0,i.Z)(at,nt,rt,!1,null,"cd3557c4",null),ot=it.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-container"},[n("div",{staticClass:"loginbox"},[n("h4",[t._v("注册")]),n("form",{attrs:{action:"#"}},[n("div",{staticClass:"unamebox"},[n("div",{staticClass:"uname"},[t._v("用户名：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.regUsername,expression:"regUsername"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:t.regUsername},on:{blur:function(e){return t.regExp1(t.regUsername,t.usnPtn)},input:function(e){e.target.composing||(t.regUsername=e.target.value)}}}),t.isUsnCrt?n("span",{staticClass:"crt"},[t._v(" √")]):n("span",{staticClass:"icrt"},[t._v(" X")]),n("p",{staticClass:"iptTips"},[t._v("字母开头，允许5-16字节，允许字母数字下划线")])]),n("div",{staticClass:"pswbox"},[n("div",{staticClass:"psw"},[t._v("登陆密码：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.regPassword,expression:"regPassword"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.regPassword},on:{blur:function(e){return t.regExp2(t.regPassword,t.pswPtn)},input:function(e){e.target.composing||(t.regPassword=e.target.value)}}}),t.isPswCrt?n("span",{staticClass:"crt"},[t._v(" √")]):n("span",{staticClass:"icrt"},[t._v(" X")]),n("p",{staticClass:"iptTips"},[t._v("以字母开头，长度在6~18之间，只能包含字母、数字和下划线")])]),n("div",{staticClass:"pswbox"},[n("div",{staticClass:"psw"},[t._v("重复输入密码：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.reRegPassword,expression:"reRegPassword"}],attrs:{type:"password",placeholder:"请重复输入密码"},domProps:{value:t.reRegPassword},on:{blur:function(e){return t.regExp3(t.reRegPassword)},input:function(e){e.target.composing||(t.reRegPassword=e.target.value)}}}),t.isRpswCrt?n("span",{staticClass:"crt"},[t._v(" √")]):n("span",{staticClass:"icrt"},[t._v(" X")])]),n("button",{staticClass:"regbtn",attrs:{disabled:!t.allCrt},on:{click:function(e){return t.subReg(t.regUsername,t.regPassword)}}},[t._v("注册")])])])])},ut=[],lt=(n(74916),n(77601),{data:function(){return{regUsername:"",regPassword:"",reRegPassword:"",usnPtn:/^[a-zA-Z][a-zA-Z0-9_]{4,15}$/,pswPtn:/^[a-zA-Z]\w{5,17}$/,isUsnCrt:!1,isPswCrt:!1,isRpswCrt:!1}},computed:{allCrt:function(){return this.isUsnCrt&&this.isPswCrt&&this.isRpswCrt}},methods:{regExp1:function(t,e){e.test(t)?this.isUsnCrt=!0:this.isUsnCrt=!1},regExp2:function(t,e){e.test(t)&&""===this.reRegPassword?this.isPswCrt=!0:e.test(t)&&""!==this.reRegPassword&&this.reRegPassword!==this.regPassword?this.isRpswCrt=!1:this.isPswCrt=!1},regExp3:function(t){t===this.regPassword?this.isRpswCrt=!0:this.isRpswCrt=!1},subReg:function(t,e){var n=this;return(0,E.Z)((0,P.Z)().mark((function r(){var s;return(0,P.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,A(t,e);case 2:s=r.sent,!0===s.state?(alert("注册成功"),n.$router.push("/home")):alert("注册失败，"+s.message);case 4:case"end":return r.stop()}}),r)})))()}}}),pt=lt,dt=(0,i.Z)(pt,ct,ut,!1,null,"68bb4f76",null),ft=dt.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"userinfo-container"},[n("el-form",{ref:"addFvrs",staticClass:"demo-dynamic",attrs:{model:t.addFvr}},[n("el-form-item",{attrs:{label:"新建收藏夹:"}},[n("el-input",{model:{value:t.addFvr.favorite_name,callback:function(e){t.$set(t.addFvr,"favorite_name",e)},expression:"addFvr.favorite_name"}}),n("el-button",{attrs:{type:"primary"},on:{click:t.addFvrSubmit}},[t._v("新建")])],1)],1),n("div",{staticClass:"fvrList"},[n("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.fvrsList,(function(e,r){return n("el-collapse-item",{key:e,staticClass:"fvrTip",attrs:{name:r},on:{mouseenter:t.showDel}},[n("template",{slot:"title"},[t._v(" "+t._s(e)+" "),n("a",{ref:"delBtn",refInFor:!0,staticClass:"delBtn",attrs:{href:"javascript:;"},on:{click:function(n){return t.delFvrList(e)}}},[t._v("删除")])]),t._l(t.fvrsListItems[r],(function(r){return n("Tip",{key:r.id,attrs:{imgsrc:r.document.Url,textcontent:r.text,tipId:r.id,fvrName:e},on:{delItemSuccess:t.reloadList}})}))],2)})),1)],1)],1)},mt=[],gt={data:function(){return{addFvr:{favorite_name:""},fvrsList:[],fvrsListItems:[],activeNames:["1"],visible:!1}},methods:{showDel:function(){console.log(1),this.$refs.delBtn.style.display="inline-block"},reloadList:function(){this.fvrsListItems=[],this.loadFvrList()},addFvrSubmit:function(){var t=this;return(0,E.Z)((0,P.Z)().mark((function e(){var n;return(0,P.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J(t.addFvr.favorite_name);case 2:n=e.sent,console.log(n),!0===n.state&&t.loadFvrList();case 5:case"end":return e.stop()}}),e)})))()},loadFvrList:function(){var t=this;return(0,E.Z)((0,P.Z)().mark((function e(){var n,r,s;return(0,P.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:if(n=e.sent,!0!==n.state){e.next=14;break}t.fvrsList=n.data.favorite_list,r=0;case 6:if(!(r<t.fvrsList.length)){e.next=14;break}return e.next=9,H(t.fvrsList[r]);case 9:s=e.sent,t.fvrsListItems.push(s.data);case 11:r++,e.next=6;break;case 14:case"end":return e.stop()}}),e)})))()},delFvrList:function(t){var e=this;return(0,E.Z)((0,P.Z)().mark((function n(){var r;return(0,P.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,q(t);case 2:r=n.sent,!0===r.state&&e.loadFvrList();case 4:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.loadFvrList()},components:{Tip:Q}},ht=gt,wt=(0,i.Z)(ht,vt,mt,!1,null,"21dd0a7a",null),_t=wt.exports;r["default"].use(l.Z);var xt=[{path:"/",redirect:"/home"},{path:"/home",component:b,meta:{title:"零度搜索"}},{path:"/result",component:et,meta:{title:"零度搜索"}},{path:"/login",component:ot,meta:{title:"登录"}},{path:"/register",component:ft,meta:{title:"注册"}},{path:"/userinfo",component:_t,meta:{title:"我的空间"}}],Ct=new l.Z({routes:xt});Ct.beforeEach((function(t,e,n){"/userinfo"===t.path?""!==localStorage.token?n():n("/login"):n()})),Ct.beforeEach((function(t,e,n){t.meta.title&&(document.title=t.meta.title),n()}));var kt=Ct;r["default"].use(g.ZP);var yt=new g.ZP.Store({state:{keyword:"",documents:[],limit:0,page:0,total:0,pageCount:0,time:0,isLogin:!1,loginedUsername:""},getters:{},mutations:{SETINPUT:function(t,e){t.keyword=e},GETRESULT:function(t,e){t.documents=e.documents,t.limit=e.limit,t.page=e.page,t.total=e.total,t.pageCount=e.pageCount,t.time=e.time},AUTOLOGIN:function(t,e){t.loginedUsername=e},SHOWUSERELEMENT:function(t,e){t.isLogin=e},LOGOUT:function(t,e){t.isLogin=!1,t.loginedUsername=""}},actions:{getResult:function(t,e){return(0,E.Z)((0,P.Z)().mark((function n(){var r;return(0,P.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,j(e);case 2:r=n.sent,(r.state="true")&&t.commit("GETRESULT",r.data);case 4:case"end":return n.stop()}}),n)})))()},pageJump:function(t,e){return(0,E.Z)((0,P.Z)().mark((function n(){var r;return(0,P.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,j(e.input,e.targetPage);case 2:r=n.sent,(r.state="true")&&t.commit("GETRESULT",r.data);case 4:case"end":return n.stop()}}),n)})))()},autoLogin:function(t,e){return(0,E.Z)((0,P.Z)().mark((function n(){var r;return(0,P.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,M(e);case 2:r=n.sent,!0===r.state?(t.commit("AUTOLOGIN",r.data.username),t.commit("SHOWUSERELEMENT",!0)):t.commit("SHOWUSERELEMENT",!1);case 4:case"end":return n.stop()}}),n)})))()}},modules:{}}),bt=n(74549),Zt=n.n(bt),Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"searchInput-container",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goSearch(t.input)}}},[n("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.goSearch(t.input)}}},[t._v("搜索")])],1)},Pt=[],Et={data:function(){return{input:""}},methods:{goSearch:function(t){this.$store.commit("SETINPUT",t),this.$store.dispatch("getResult",t),this.$route.path,this.$router.push({path:"result",query:{input:this.keyword}})}},computed:(0,m.Z)({},(0,g.rn)({keyword:function(t){return t.keyword}})),mounted:function(){this.input=this.keyword}},St=Et,Ut=(0,i.Z)(St,Lt,Pt,!1,null,"04bfaa60",null),Tt=Ut.exports;r["default"].config.productionTip=!1,r["default"].use(Zt()),r["default"].component("SearchInput",Tt),r["default"].component("User",x),new r["default"]({router:kt,store:yt,render:function(t){return t(u)}}).$mount("#app")},71125:function(t,e,n){"use strict";t.exports=n.p+"img/leiyu.5f127551.png"},1857:function(t,e,n){"use strict";t.exports=n.p+"img/useriomg.a9e71540.png"},24654:function(){}},e={};function n(r){var s=e[r];if(void 0!==s)return s.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,r,s,a){if(!r){var i=1/0;for(l=0;l<t.length;l++){r=t[l][0],s=t[l][1],a=t[l][2];for(var o=!0,c=0;c<r.length;c++)(!1&a||i>=a)&&Object.keys(n.O).every((function(t){return n.O[t](r[c])}))?r.splice(c--,1):(o=!1,a<i&&(i=a));if(o){t.splice(l--,1);var u=s();void 0!==u&&(e=u)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[r,s,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,a,i=r[0],o=r[1],c=r[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(c)var l=c(n)}for(e&&e(r);u<i.length;u++)a=i[u],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(l)},r=self["webpackChunkleiyu"]=self["webpackChunkleiyu"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(67184)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.ff72c789.js.map